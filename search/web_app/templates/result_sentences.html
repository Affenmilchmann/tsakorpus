{% if data.timeout %}
<p class="message">{{ _('The search was not finished due to the query timeout. You only see partial results.') }}</p>
{% endif %}
{% if data.subcorpus_enabled %}
<p class="message">{{ _('You are searching in a subcorpus.') }}</p>
{% endif %}
<p>{{ ngettext('Search result:', 'Search result:', data.n_occurrences) }}
{{ data.n_occurrences }} {{ ngettext('occurrence', 'occurrences', data.n_occurrences) }},
{{ data.n_sentences }} {{ ngettext('sentence found in approximately', 'sentences found in approximately', data.n_sentences) }}
{{ data.n_docs }} {{ ngettext('in_document', 'in_documents', data.n_docs) }}.</p>

<div class="sent_results">
{% for c in data.contexts %}
	{% set context_loop = loop %}
	<div class="context {% if not c.toggled_on %} context_off{% endif %}" id='div_res{{ loop.index - 1 }}'>
	<span class="ch_container"{% if data.context_header_rtl %} dir="rtl"{% endif %}>{{ c.header | safe }}</span>
	<div class="cx_main">
	<div class="cx_toggle_div"><input type="checkbox" class="cx_toggle_chk" {% if c.toggled_on %} checked{% endif %}></div>
	<span class="get_glossed_copy" data-nsent="{{ loop.index - 1 }}"><span class="glyph_copy glyphicon glyphicon-copy" aria-hidden="true"></span></span>
	<span class="sentence" id='res{{ loop.index - 1 }}'>
	{% for lang in data.languages %}
		{% if lang in c.languages %}
		<span class="sent_lang sent_lang_{{ lang }}" id='res{{ context_loop.index - 1 }}_{{ lang }}' {% if c.languages[lang].img %}data-img="{{ c.languages[lang].img }}"{% endif %}{% if c.languages[lang].rtl %} dir="rtl"{% endif %}>
		{{ c.languages[lang].text | safe }}
		</span>
		{% if not loop.last %}{% endif %}
		{% endif %}
	{% endfor %}
	</span>
	<span class='expand' data-nsent="{{ loop.index - 1 }}"><span class="glyph_expand glyphicon glyphicon-resize-horizontal" aria-hidden="true"></span></span>
	</div>
	</div>
{% endfor %}
</div>
{% if data.message %}
<p class="message">{{ data.message }}</p>
{% endif %}

{% if data.src_alignment %}
<script type='text/javascript'>
var srcAlignments = {{ data.src_alignment | safe }};
</script>
{% endif %}

{% if data.contexts|length > 0 %}
	<div class="pages">
		{% if data.page - 6 > 0 %}
		<span class="page_link" data-page="1">1</span>&nbsp;
		...&nbsp;
		{% endif %}
		{% for i_page in range(-5, 6) %}
			{% if (data.page + i_page > 0) and (data.page + i_page < data.n_sentences / data.page_size + 1) %}
			{% if i_page == 0 %}
			<span class="cur_page">{{ data.page + i_page }}</span>&nbsp;
			{% else %}
			<span class="page_link" data-page="{{ data.page + i_page }}">{{ data.page + i_page }}</span>&nbsp;
			{% endif %}
			{% endif %}
		{% endfor %}
		{% if data.page + 7 < data.n_sentences / data.page_size + 1 %}
		<span class="page_link">...</span>&nbsp;
		<span class="page_link" data-page="{{ (data.n_sentences - 1) // data.page_size + 1 }}">{{ (data.n_sentences - 1) // data.page_size + 1 }}</span>&nbsp;
		{% endif %}
	</div>
	<a href="download_cur_results_csv" download="results-{{ data.page }}.csv">{{ _('download as CSV') }}</a>
	<a href="download_cur_results_xlsx" download="results-{{ data.page }}.xlsx">{{ _('download as XLSX') }}</a>
	<script type='text/javascript'>assign_word_events(); hide_query_panel();</script>
	{% if data.media %}
	<script type='text/javascript'>
	show_player();
	</script>
	{% endif %}
	<script type='text/javascript'>searchType = 'sentences';</script>
{% else %}
	<script type='text/javascript'>
	{% if data.media %}
	hide_player();
	{% endif %}
	{% if data.images %}
	hide_img();
	{% endif %}
	show_query_panel();
	searchType = 'none';
	</script>
{% endif %}

